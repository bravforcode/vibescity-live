/* Global Mapbox Marker Styles & Animations */

/* Fireflies */
.firefly-container {
	position: absolute;
	inset: 0;
	overflow: hidden;
	pointer-events: none; /* Ensure clicks pass through */
}

.firefly {
	position: absolute;
	width: 4px;
	height: 4px;
	background: radial-gradient(
		circle,
		rgba(255, 220, 100, 0.9) 0%,
		rgba(255, 200, 50, 0.5) 50%,
		transparent 70%
	);
	border-radius: 50%;
	box-shadow:
		0 0 8px rgba(255, 220, 100, 0.7),
		0 0 15px rgba(255, 200, 50, 0.4);
	animation: fireflyFloat ease-in-out infinite;
	pointer-events: none;
}

@keyframes fireflyFloat {
	0%,
	100% {
		transform: translateY(0) translateX(0) scale(1);
		opacity: 0.2;
	}
	25% {
		transform: translateY(-25px) translateX(12px) scale(1.3);
		opacity: 0.9;
	}
	50% {
		transform: translateY(-40px) translateX(-8px) scale(0.9);
		opacity: 0.5;
	}
	75% {
		transform: translateY(-15px) translateX(15px) scale(1.1);
		opacity: 0.7;
	}
}

/* Custom Popup Styles */
.vibe-mapbox-popup .mapboxgl-popup-content {
	padding: 0;
	background: transparent;
	box-shadow: none;
	border-radius: 20px;
}

.vibe-mapbox-popup .mapboxgl-popup-tip {
	display: none; /* Tip can cause gaps, custom SVG pin tip is better */
}

/* Entry animation for popup */
@keyframes popup-reveal {
	0% {
		opacity: 0;
		transform: translateY(10px) scale(0.9);
	}
	100% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

.vibe-popup {
	animation: popup-reveal 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
	font-family: var(--font-body, "Prompt", "Sarabun", system-ui, sans-serif);
}

/* Coin Glow Effect */
.marker-wrapper.coin-glow {
	filter: drop-shadow(0 0 4px rgba(234, 179, 8, 0.4));
	animation: coin-pulse 2.5s ease-in-out infinite;
}

@keyframes coin-pulse {
	0%,
	100% {
		filter: drop-shadow(0 0 4px rgba(234, 179, 8, 0.4));
	}
	50% {
		filter: drop-shadow(0 0 8px rgba(234, 179, 8, 0.6));
	}
}

@keyframes coin-spin {
	0%,
	100% {
		transform: rotateY(0deg);
	}
	50% {
		transform: rotateY(180deg);
	}
}

/* Giant Pin for Events - Premium SVG Design */
.giant-pin-marker {
	z-index: 150;
	pointer-events: auto; /* Allow clicks */
}

.giant-pin-wrapper {
	position: relative;
	display: flex;
	flex-direction: column;
	align-items: center;
	filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
	animation: giant-pin-float 3s ease-in-out infinite;
	will-change: transform;
	transform: translateZ(0);
}

.giant-pin-svg {
	overflow: visible;
}

.giant-pin-glow-ring {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -60%);
	width: 56px;
	height: 56px;
	border-radius: 50%;
	background: radial-gradient(
		circle,
		rgba(147, 51, 234, 0.5) 0%,
		transparent 70%
	);
	animation: ring-pulse 2s ease-out infinite;
	pointer-events: none;
	z-index: 1;
}

.giant-pin-purple-img {
	transition: transform 0.2s ease;
}
.giant-pin-wrapper:hover .giant-pin-purple-img {
	transform: scale(1.12) translateY(-2px);
}

.giant-pin-label-new {
	position: absolute;
	bottom: -15px;
	left: 50%;
	transform: translateX(-50%);
	padding: 4px 12px;
	background: linear-gradient(
		135deg,
		rgba(15, 15, 25, 0.95),
		rgba(30, 30, 50, 0.95)
	);
	color: white;
	font-size: 10px;
	font-weight: 800;
	letter-spacing: 0.5px;
	border-radius: 20px;
	white-space: nowrap;
	backdrop-filter: blur(10px);
	border: 1px solid rgba(139, 92, 246, 0.5);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
	text-transform: uppercase;
}

.pulse-ring {
	transform-origin: 40px 35px;
	animation: ring-pulse 2s ease-out infinite;
}

@keyframes ring-pulse {
	0% {
		transform: scale(1);
		opacity: 0.5;
	}
	100% {
		transform: scale(1.5);
		opacity: 0;
	}
}

@keyframes giant-pin-float {
	0%,
	100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-8px);
	}
}

@keyframes giant-pulse {
	0% {
		transform: translate(-50%, -50%) scale(0.8);
		opacity: 1;
	}
	100% {
		transform: translate(-50%, -50%) scale(2);
		opacity: 0;
	}
}

/* Entertainment Distance Label */
.distance-badge {
	background: linear-gradient(
		135deg,
		rgba(6, 182, 212, 0.2),
		rgba(139, 92, 246, 0.2)
	);
	padding: 2px 8px;
	border-radius: 12px;
	border: 1px solid rgba(6, 182, 212, 0.3);
	font-family: var(--font-mono, "JetBrains Mono", "Fira Code", monospace);
	letter-spacing: 0.5px;
}

/* LIVE Heartbeat Pulse - Multi Layered */
.live-pulse-ring-outer {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 50px;
	height: 50px;
	border-radius: 50%;
	background: rgba(255, 45, 85, 0.15);
	animation: marker-pulse-outer 3s infinite ease-out;
	pointer-events: none;
	z-index: -3;
}

.live-pulse-ring-inner {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 30px;
	height: 30px;
	border-radius: 50%;
	background: rgba(255, 45, 85, 0.3);
	animation: marker-pulse-inner 1.5s infinite ease-out;
	pointer-events: none;
	z-index: -2;
}

.live-pulse-core {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 15px;
	height: 15px;
	border-radius: 50%;
	background: #ff2d55;
	box-shadow: 0 0 20px #ff2d55;
	animation: core-throb 0.8s infinite alternate ease-in-out;
	pointer-events: none;
	z-index: -1;
}

@keyframes marker-pulse-outer {
	0% {
		transform: translate(-50%, -50%) scale(0.6);
		opacity: 1;
	}
	100% {
		transform: translate(-50%, -50%) scale(3);
		opacity: 0;
	}
}

@keyframes marker-pulse-inner {
	0% {
		transform: translate(-50%, -50%) scale(0.8);
		opacity: 0.8;
	}
	100% {
		transform: translate(-50%, -50%) scale(2.2);
		opacity: 0;
	}
}

@keyframes core-throb {
	from {
		transform: translate(-50%, -50%) scale(1);
		opacity: 0.8;
	}
	to {
		transform: translate(-50%, -50%) scale(1.3);
		opacity: 1;
	}
}

/* ───────────────────────────────────────────────────────
   Accessibility: honour OS-level reduced-motion preference
   All decorative map animations are disabled; static
   fallback states retain the visual design.
──────────────────────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
	.firefly {
		animation: none;
		opacity: 0.6;
	}
	.giant-pin-wrapper {
		animation: none;
		filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.4));
	}
	.pulse-ring {
		animation: none;
		opacity: 0;
	}
	.marker-wrapper.coin-glow {
		animation: none;
	}
	.live-pulse-ring-outer,
	.live-pulse-ring-inner {
		animation: none;
		opacity: 0;
	}
	.live-pulse-core {
		animation: none;
		opacity: 1;
	}
	.vibe-popup {
		animation: none;
	}
}
